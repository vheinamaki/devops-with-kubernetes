Script started on 2022-07-21 20:46:12+03:00 [TERM="xterm-256color" TTY="/dev/pts/2" COLUMNS="120" LINES="30"]
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ curl --proto '=https' --tlsv1.2 -sSfL https://linkerd.github.io/linkerd-smi/install | sh
Downloading linkerd-smi-0.2.0-linux-amd64...
https://github.com/linkerd/linkerd-smi/releases/download/v0.2.0/linkerd-smi-0.2.0-linux-amd64
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
  1 33.7M    1  575k    0     0   458k      0  0:01:15  0:00:01  0:01:14  458k 10 33.7M   10 3487k    0     0  1544k      0  0:00:22  0:00:02  0:00:20 2909k 18 33.7M   18 6447k    0     0  1979k      0  0:00:17  0:00:03  0:00:14 2936k 28 33.7M   28 9775k    0     0  2295k      0  0:00:15  0:00:04  0:00:11 3063k 36 33.7M   36 12.3M    0     0  2404k      0  0:00:14  0:00:05  0:00:09 3016k 47 33.7M   47 16.1M    0     0  2636k      0  0:00:13  0:00:06  0:00:07 3184k 61 33.7M   61 20.7M    0     0  2925k      0  0:00:11  0:00:07  0:00:04 3548k 75 33.7M   75 25.4M    0     0  3156k      0  0:00:10  0:00:08  0:00:02 3923k 88 33.7M   88 29.8M    0     0  3300k      0  0:00:10  0:00:09  0:00:01 4155k100 33.7M  100 33.7M    0     0  3376k      0  0:00:10  0:00:10 --:--:-- 4402k
Download complete!

Validating checksum...
Checksum valid.

Linkerd SMI v0.2.0 was successfully installed ðŸŽ‰


Add the linkerd bin folder to your path with:

  export PATH=$PATH:/home/ville/.linkerd2/bin

Now run:

  linkerd smi install | kubectl apply -f -   # install the SMI extension
  linkerd smi check                          # validate everything worked!

(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ export PATH=$PATH:/home/ville/.linkerd2/bin
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ linkerd smi check^C
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ linkerd smi install | kubectl apply -f -
namespace/linkerd-smi created
deployment.apps/smi-adaptor created
clusterrole.rbac.authorization.k8s.io/smi-adaptor created
clusterrolebinding.rbac.authorization.k8s.io/smi-adaptor created
serviceaccount/smi-adaptor created
customresourcedefinition.apiextensions.k8s.io/trafficsplits.split.smi-spec.io configured
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ linkerd smi check
linkerd-smi
-----------
[32;1mâˆš[0m linkerd-smi extension Namespace exists
[32;1mâˆš[0m SMI extension service account exists
[32;1mâˆš[0m SMI extension pods are injected
[1m|[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m/[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m-[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m\[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m|[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m/[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m-[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m\[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m|[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m/[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m-[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m\[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m|[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m/[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m-[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m\[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m|[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m/[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m-[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m\[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m|[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m/[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m-[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m\[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m|[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m/[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m-[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m\[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m|[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m/[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m-[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m\[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m|[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m/[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m-[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m\[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m|[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m/[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m-[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m\[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m|[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m/[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m-[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m\[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m|[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m/[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m-[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m\[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m|[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m/[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m-[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m\[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m|[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m/[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m-[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m\[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m|[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m/[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m-[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m\[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m|[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m/[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m-[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m\[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m|[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m/[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m-[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m\[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m|[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m/[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m-[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m\[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m|[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m/[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m-[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m\[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m|[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m/[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m-[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m\[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m|[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m/[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m-[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m\[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m|[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m/[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m-[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m\[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m|[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m/[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m-[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m\[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m|[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m/[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m-[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m\[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m|[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m/[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m-[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[1m\[0m smi-adaptor-5788b875d4-7lkbx status is Pending [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[32;1mâˆš[0m SMI extension pods are running
[32;1mâˆš[0m SMI extension proxies are healthy

Status check results are [32;1mâˆš[0m
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ helm repo add l5d-smi https://linkerd.github.io/linkerd-smi
helm install l5d-smi/linkerd-smi --generate-name"l5d-smi" has been added to your repositories
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ helm install l5d-smi/linkerd-smi --generate-name
Error: INSTALLATION FAILED: rendered manifests contain a resource that already exists. Unable to continue with install: CustomResourceDefinition "trafficsplits.split.smi-spec.io" in namespace "" exists and cannot be imported into the current release: invalid ownership metadata; label validation error: missing key "app.kubernetes.io/managed-by": must be set to "Helm"; annotation validation error: missing key "meta.helm.sh/release-name": must be set to "linkerd-smi-1658426011"; annotation validation error: missing key "meta.helm.sh/release-namespace": must be set to "default"
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ kubectl get crds
NAME                                     CREATED AT
addons.k3s.cattle.io                     2022-07-20T19:02:23Z
helmcharts.helm.cattle.io                2022-07-20T19:02:23Z
helmchartconfigs.helm.cattle.io          2022-07-20T19:02:23Z
middlewaretcps.traefik.containo.us       2022-07-20T19:03:14Z
tlsoptions.traefik.containo.us           2022-07-20T19:03:14Z
tlsstores.traefik.containo.us            2022-07-20T19:03:14Z
ingressrouteudps.traefik.containo.us     2022-07-20T19:03:14Z
serverstransports.traefik.containo.us    2022-07-20T19:03:14Z
ingressroutetcps.traefik.containo.us     2022-07-20T19:03:14Z
middlewares.traefik.containo.us          2022-07-20T19:03:14Z
ingressroutes.traefik.containo.us        2022-07-20T19:03:14Z
traefikservices.traefik.containo.us      2022-07-20T19:03:14Z
servers.policy.linkerd.io                2022-07-21T15:53:10Z
serverauthorizations.policy.linkerd.io   2022-07-21T15:53:10Z
serviceprofiles.linkerd.io               2022-07-21T15:53:10Z
trafficsplits.split.smi-spec.io          2022-07-21T15:53:10Z
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ kubectl apply -k github.com/fluxcd/flagger/kustomize/linkerd
customresourcedefinition.apiextensions.k8s.io/alertproviders.flagger.app created
customresourcedefinition.apiextensions.k8s.io/canaries.flagger.app created
customresourcedefinition.apiextensions.k8s.io/metrictemplates.flagger.app created
serviceaccount/flagger created
clusterrole.rbac.authorization.k8s.io/flagger created
clusterrolebinding.rbac.authorization.k8s.io/flagger created
deployment.apps/flagger created
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ kubectl -n linkerd rollout status deploy/flagger
deployment "flagger" successfully rolled out
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ kubectl create ns test
namespace/test created
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ kubectl apply -f [Khttps://run.linkerd.io/flagger.yml
deployment.apps/load created
configmap/frontend created
deployment.apps/frontend created
service/frontend created
deployment.apps/podinfo created
service/podinfo created
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ kubectl -n test rollout status deploy podinfo[1P[1P[1P[1P[1P[1P[1P[1P[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C -n test
deployment "podinfo" successfully rolled out
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ kubectl rollout status deploy podinfo -n test
deployment "podinfo" successfully rolled out
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ kubectl pot[Krt-forward svc/forntend[K[K[K[K[K[K[Krontend -n test 8080
Forwarding from 127.0.0.1:8080 -> 8080
Forwarding from [::1]:8080 -> 8080
Handling connection for 8080
^C(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ cat <<EOF > canary.yaml
> apiVersion: flagger.app/v1beta1
> kind: Canary
> metadata:
>   name: podinfo
>   namespace: test
> spec:
>   targetRef:
>     apiVersion: apps/v1
>     kind: Deployment
rvice:
>     name: podinfo
>   service:
>     port: 9898
>   analysis:
>     interval: 10s
>     threshold: 5
>     stepWeight: 10
>     maxWeight: 100
metrics:
    - >     metrics:
>     - name: request-success-rate
>       thresholdRange:
>         min: 99
>       interval: 1m
>     - name: request-duration
>       thresholdRange:
>         max: 500
>       interval: 1m
> EOF
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ ls
canary.yaml  session.txt
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ kubectl apply -f canary.yaml 
canary.flagger.app/podinfo created
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ kubectl get ev -n test --watch
LAST SEEN   TYPE      REASON                  OBJECT                                  MESSAGE
4m36s       Normal    ScalingReplicaSet       deployment/load                         Scaled up replica set load-7f97579865 to 1
4m36s       Normal    ScalingReplicaSet       deployment/frontend                     Scaled up replica set frontend-6957977dc7 to 1
4m36s       Normal    Injected                deployment/load                         Linkerd sidecar proxy injected
4m36s       Normal    Injected                deployment/frontend                     Linkerd sidecar proxy injected
4m36s       Normal    SuccessfulCreate        replicaset/load-7f97579865              Created pod: load-7f97579865-tbb67
4m36s       Normal    Scheduled               pod/load-7f97579865-tbb67               Successfully assigned test/load-7f97579865-tbb67 to k3d-k3s-default-agent-0
4m36s       Normal    SuccessfulCreate        replicaset/frontend-6957977dc7          Created pod: frontend-6957977dc7-t766p
4m36s       Normal    Scheduled               pod/frontend-6957977dc7-t766p           Successfully assigned test/frontend-6957977dc7-t766p to k3d-k3s-default-server-0
4m36s       Normal    ScalingReplicaSet       deployment/podinfo                      Scaled up replica set podinfo-7bfd46f477 to 1
4m36s       Normal    Injected                deployment/podinfo                      Linkerd sidecar proxy injected
4m36s       Normal    SuccessfulCreate        replicaset/podinfo-7bfd46f477           Created pod: podinfo-7bfd46f477-fjj8h
4m36s       Normal    Scheduled               pod/podinfo-7bfd46f477-fjj8h            Successfully assigned test/podinfo-7bfd46f477-fjj8h to k3d-k3s-default-agent-1
4m36s       Normal    Pulled                  pod/load-7f97579865-tbb67               Container image "cr.l5d.io/linkerd/proxy-init:v1.5.3" already present on machine
4m36s       Normal    Pulled                  pod/frontend-6957977dc7-t766p           Container image "cr.l5d.io/linkerd/proxy-init:v1.5.3" already present on machine
4m36s       Normal    Created                 pod/load-7f97579865-tbb67               Created container linkerd-init
4m36s       Normal    Created                 pod/frontend-6957977dc7-t766p           Created container linkerd-init
4m36s       Normal    Started                 pod/load-7f97579865-tbb67               Started container linkerd-init
4m36s       Normal    Pulled                  pod/podinfo-7bfd46f477-fjj8h            Container image "cr.l5d.io/linkerd/proxy-init:v1.5.3" already present on machine
4m36s       Normal    Started                 pod/frontend-6957977dc7-t766p           Started container linkerd-init
4m36s       Normal    Created                 pod/podinfo-7bfd46f477-fjj8h            Created container linkerd-init
4m36s       Normal    Started                 pod/podinfo-7bfd46f477-fjj8h            Started container linkerd-init
4m35s       Normal    Pulled                  pod/frontend-6957977dc7-t766p           Container image "cr.l5d.io/linkerd/proxy:stable-2.11.4" already present on machine
4m35s       Normal    Pulled                  pod/podinfo-7bfd46f477-fjj8h            Container image "cr.l5d.io/linkerd/proxy:stable-2.11.4" already present on machine
4m35s       Normal    Created                 pod/frontend-6957977dc7-t766p           Created container linkerd-proxy
4m35s       Normal    Created                 pod/podinfo-7bfd46f477-fjj8h            Created container linkerd-proxy
4m35s       Normal    Started                 pod/frontend-6957977dc7-t766p           Started container linkerd-proxy
4m35s       Normal    Started                 pod/podinfo-7bfd46f477-fjj8h            Started container linkerd-proxy
4m35s       Normal    IssuedLeafCertificate   serviceaccount/default                  issued certificate for default.test.serviceaccount.identity.linkerd.cluster.local until 2022-07-22 17:57:16 +0000 UTC: 794712d4b7d06256ee2e7a86fae9dbb8
4m35s       Normal    IssuedLeafCertificate   serviceaccount/default                  issued certificate for default.test.serviceaccount.identity.linkerd.cluster.local until 2022-07-22 17:57:16 +0000 UTC: 3384072f59121facc29b1baf67bfd43e
4m35s       Normal    Pulled                  pod/load-7f97579865-tbb67               Container image "cr.l5d.io/linkerd/proxy:stable-2.11.4" already present on machine
4m35s       Normal    Created                 pod/load-7f97579865-tbb67               Created container linkerd-proxy
4m35s       Normal    Started                 pod/load-7f97579865-tbb67               Started container linkerd-proxy
4m34s       Normal    IssuedLeafCertificate   serviceaccount/default                  issued certificate for default.test.serviceaccount.identity.linkerd.cluster.local until 2022-07-22 17:57:17 +0000 UTC: 9fc30430222b9455a9131e6a99a26de5
4m34s       Normal    Pulling                 pod/frontend-6957977dc7-t766p           Pulling image "nginx:alpine"
4m34s       Normal    Pulling                 pod/podinfo-7bfd46f477-fjj8h            Pulling image "quay.io/stefanprodan/podinfo:1.7.0"
4m33s       Normal    Pulling                 pod/load-7f97579865-tbb67               Pulling image "buoyantio/slow_cooker:1.2.0"
4m29s       Normal    Pulled                  pod/podinfo-7bfd46f477-fjj8h            Successfully pulled image "quay.io/stefanprodan/podinfo:1.7.0" in 4.9281988s
4m29s       Normal    Created                 pod/podinfo-7bfd46f477-fjj8h            Created container podinfod
4m29s       Normal    Started                 pod/podinfo-7bfd46f477-fjj8h            Started container podinfod
4m27s       Normal    Pulled                  pod/load-7f97579865-tbb67               Successfully pulled image "buoyantio/slow_cooker:1.2.0" in 6.2414386s
4m27s       Normal    Created                 pod/load-7f97579865-tbb67               Created container slow-cooker
4m27s       Normal    Started                 pod/load-7f97579865-tbb67               Started container slow-cooker
4m27s       Normal    Pulled                  pod/frontend-6957977dc7-t766p           Successfully pulled image "nginx:alpine" in 7.314062s
4m26s       Normal    Created                 pod/frontend-6957977dc7-t766p           Created container nginx
4m26s       Normal    Started                 pod/frontend-6957977dc7-t766p           Started container nginx
44s         Warning   Synced                  canary/podinfo                          podinfo-primary.test not ready: waiting for rollout to finish: observed deployment generation less than desired generation
44s         Normal    ScalingReplicaSet       deployment/podinfo-primary              Scaled up replica set podinfo-primary-54dd4d4876 to 1
44s         Normal    Injected                deployment/podinfo-primary              Linkerd sidecar proxy injected
44s         Normal    SuccessfulCreate        replicaset/podinfo-primary-54dd4d4876   Created pod: podinfo-primary-54dd4d4876-fr5nh
44s         Normal    Scheduled               pod/podinfo-primary-54dd4d4876-fr5nh    Successfully assigned test/podinfo-primary-54dd4d4876-fr5nh to k3d-k3s-default-agent-0
43s         Normal    Pulled                  pod/podinfo-primary-54dd4d4876-fr5nh    Container image "cr.l5d.io/linkerd/proxy-init:v1.5.3" already present on machine
43s         Normal    Created                 pod/podinfo-primary-54dd4d4876-fr5nh    Created container linkerd-init
43s         Normal    Started                 pod/podinfo-primary-54dd4d4876-fr5nh    Started container linkerd-init
42s         Normal    Pulled                  pod/podinfo-primary-54dd4d4876-fr5nh    Container image "cr.l5d.io/linkerd/proxy:stable-2.11.4" already present on machine
42s         Normal    Created                 pod/podinfo-primary-54dd4d4876-fr5nh    Created container linkerd-proxy
42s         Normal    Started                 pod/podinfo-primary-54dd4d4876-fr5nh    Started container linkerd-proxy
42s         Normal    IssuedLeafCertificate   serviceaccount/default                  issued certificate for default.test.serviceaccount.identity.linkerd.cluster.local until 2022-07-22 18:01:09 +0000 UTC: 9a88498c3e7fae9701663c92dececf72
41s         Normal    Pulling                 pod/podinfo-primary-54dd4d4876-fr5nh    Pulling image "quay.io/stefanprodan/podinfo:1.7.0"
35s         Normal    Pulled                  pod/podinfo-primary-54dd4d4876-fr5nh    Successfully pulled image "quay.io/stefanprodan/podinfo:1.7.0" in 5.9068791s
34s         Normal    Created                 pod/podinfo-primary-54dd4d4876-fr5nh    Created container podinfod
34s         Normal    Started                 pod/podinfo-primary-54dd4d4876-fr5nh    Started container podinfod
34s         Normal    Synced                  canary/podinfo                          all the metrics providers are available!
34s         Normal    ScalingReplicaSet       deployment/podinfo                      Scaled down replica set podinfo-7bfd46f477 to 0
34s         Normal    SuccessfulDelete        replicaset/podinfo-7bfd46f477           Deleted pod: podinfo-7bfd46f477-fjj8h
34s         Normal    Killing                 pod/podinfo-7bfd46f477-fjj8h            Stopping container linkerd-proxy
34s         Normal    Synced                  canary/podinfo                          Initialization done! podinfo.test
34s         Normal    Created                 trafficsplit/podinfo                    Created Service Profile podinfo.test.svc.cluster.local
30s         Normal    Killing                 pod/podinfo-7bfd46f477-fjj8h            Stopping container podinfod
30s         Warning   FailedKillPod           pod/podinfo-7bfd46f477-fjj8h            error killing pod: failed to "KillContainer" for "podinfod" with KillContainerError: "rpc error: code = NotFound desc = an error occurred when try to find container \"c41ba6d69df7fac8857a4260e2cd8eb8da3f06ea496e6d3315212df03eeb8cf6\": not found"
^C(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ kubectl et [K[K[Kget pods -n test
NAME                               READY   STATUS    RESTARTS   AGE
load-7f97579865-tbb67              2/2     Running   0          5m47s
frontend-6957977dc7-t766p          2/2     Running   0          5m47s
podinfo-primary-54dd4d4876-fr5nh   2/2     Running   0          115s
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ kubectl get svc -n et[Kte[K[Kte[K[K[Ktest
NAME              TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)    AGE
frontend          ClusterIP   10.43.21.67     <none>        8080/TCP   6m5s
podinfo-canary    ClusterIP   10.43.123.61    <none>        9898/TCP   2m13s
podinfo-primary   ClusterIP   10.43.26.117    <none>        9898/TCP   2m13s
podinfo           ClusterIP   10.43.237.159   <none>        9898/TCP   6m5s
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ kubectl -n test set image deployment/podinfo podinfod=quay.io/stefanproa[Kdan/podinfo:1.71.1[C
deployment.apps/podinfo image updated
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ kubectl get ev -n test --watch
LAST SEEN   TYPE      REASON                  OBJECT                                  MESSAGE
9m7s        Normal    ScalingReplicaSet       deployment/load                         Scaled up replica set load-7f97579865 to 1
9m7s        Normal    ScalingReplicaSet       deployment/frontend                     Scaled up replica set frontend-6957977dc7 to 1
9m7s        Normal    Injected                deployment/load                         Linkerd sidecar proxy injected
9m7s        Normal    Injected                deployment/frontend                     Linkerd sidecar proxy injected
9m7s        Normal    SuccessfulCreate        replicaset/load-7f97579865              Created pod: load-7f97579865-tbb67
9m7s        Normal    Scheduled               pod/load-7f97579865-tbb67               Successfully assigned test/load-7f97579865-tbb67 to k3d-k3s-default-agent-0
9m7s        Normal    SuccessfulCreate        replicaset/frontend-6957977dc7          Created pod: frontend-6957977dc7-t766p
9m7s        Normal    Scheduled               pod/frontend-6957977dc7-t766p           Successfully assigned test/frontend-6957977dc7-t766p to k3d-k3s-default-server-0
9m7s        Normal    ScalingReplicaSet       deployment/podinfo                      Scaled up replica set podinfo-7bfd46f477 to 1
9m7s        Normal    SuccessfulCreate        replicaset/podinfo-7bfd46f477           Created pod: podinfo-7bfd46f477-fjj8h
9m7s        Normal    Scheduled               pod/podinfo-7bfd46f477-fjj8h            Successfully assigned test/podinfo-7bfd46f477-fjj8h to k3d-k3s-default-agent-1
9m7s        Normal    Pulled                  pod/load-7f97579865-tbb67               Container image "cr.l5d.io/linkerd/proxy-init:v1.5.3" already present on machine
9m7s        Normal    Pulled                  pod/frontend-6957977dc7-t766p           Container image "cr.l5d.io/linkerd/proxy-init:v1.5.3" already present on machine
9m7s        Normal    Created                 pod/load-7f97579865-tbb67               Created container linkerd-init
9m7s        Normal    Created                 pod/frontend-6957977dc7-t766p           Created container linkerd-init
9m7s        Normal    Started                 pod/load-7f97579865-tbb67               Started container linkerd-init
9m7s        Normal    Pulled                  pod/podinfo-7bfd46f477-fjj8h            Container image "cr.l5d.io/linkerd/proxy-init:v1.5.3" already present on machine
9m7s        Normal    Started                 pod/frontend-6957977dc7-t766p           Started container linkerd-init
9m7s        Normal    Created                 pod/podinfo-7bfd46f477-fjj8h            Created container linkerd-init
9m7s        Normal    Started                 pod/podinfo-7bfd46f477-fjj8h            Started container linkerd-init
9m6s        Normal    Pulled                  pod/frontend-6957977dc7-t766p           Container image "cr.l5d.io/linkerd/proxy:stable-2.11.4" already present on machine
9m6s        Normal    Pulled                  pod/podinfo-7bfd46f477-fjj8h            Container image "cr.l5d.io/linkerd/proxy:stable-2.11.4" already present on machine
9m6s        Normal    Created                 pod/frontend-6957977dc7-t766p           Created container linkerd-proxy
9m6s        Normal    Created                 pod/podinfo-7bfd46f477-fjj8h            Created container linkerd-proxy
9m6s        Normal    Started                 pod/frontend-6957977dc7-t766p           Started container linkerd-proxy
9m6s        Normal    Started                 pod/podinfo-7bfd46f477-fjj8h            Started container linkerd-proxy
9m6s        Normal    IssuedLeafCertificate   serviceaccount/default                  issued certificate for default.test.serviceaccount.identity.linkerd.cluster.local until 2022-07-22 17:57:16 +0000 UTC: 794712d4b7d06256ee2e7a86fae9dbb8
9m6s        Normal    IssuedLeafCertificate   serviceaccount/default                  issued certificate for default.test.serviceaccount.identity.linkerd.cluster.local until 2022-07-22 17:57:16 +0000 UTC: 3384072f59121facc29b1baf67bfd43e
9m6s        Normal    Pulled                  pod/load-7f97579865-tbb67               Container image "cr.l5d.io/linkerd/proxy:stable-2.11.4" already present on machine
9m6s        Normal    Created                 pod/load-7f97579865-tbb67               Created container linkerd-proxy
9m6s        Normal    Started                 pod/load-7f97579865-tbb67               Started container linkerd-proxy
9m5s        Normal    IssuedLeafCertificate   serviceaccount/default                  issued certificate for default.test.serviceaccount.identity.linkerd.cluster.local until 2022-07-22 17:57:17 +0000 UTC: 9fc30430222b9455a9131e6a99a26de5
9m5s        Normal    Pulling                 pod/frontend-6957977dc7-t766p           Pulling image "nginx:alpine"
9m5s        Normal    Pulling                 pod/podinfo-7bfd46f477-fjj8h            Pulling image "quay.io/stefanprodan/podinfo:1.7.0"
9m4s        Normal    Pulling                 pod/load-7f97579865-tbb67               Pulling image "buoyantio/slow_cooker:1.2.0"
9m          Normal    Pulled                  pod/podinfo-7bfd46f477-fjj8h            Successfully pulled image "quay.io/stefanprodan/podinfo:1.7.0" in 4.9281988s
9m          Normal    Created                 pod/podinfo-7bfd46f477-fjj8h            Created container podinfod
9m          Normal    Started                 pod/podinfo-7bfd46f477-fjj8h            Started container podinfod
8m58s       Normal    Pulled                  pod/load-7f97579865-tbb67               Successfully pulled image "buoyantio/slow_cooker:1.2.0" in 6.2414386s
8m58s       Normal    Created                 pod/load-7f97579865-tbb67               Created container slow-cooker
8m58s       Normal    Started                 pod/load-7f97579865-tbb67               Started container slow-cooker
8m58s       Normal    Pulled                  pod/frontend-6957977dc7-t766p           Successfully pulled image "nginx:alpine" in 7.314062s
8m57s       Normal    Created                 pod/frontend-6957977dc7-t766p           Created container nginx
8m57s       Normal    Started                 pod/frontend-6957977dc7-t766p           Started container nginx
5m15s       Warning   Synced                  canary/podinfo                          podinfo-primary.test not ready: waiting for rollout to finish: observed deployment generation less than desired generation
5m15s       Normal    ScalingReplicaSet       deployment/podinfo-primary              Scaled up replica set podinfo-primary-54dd4d4876 to 1
5m15s       Normal    Injected                deployment/podinfo-primary              Linkerd sidecar proxy injected
5m15s       Normal    SuccessfulCreate        replicaset/podinfo-primary-54dd4d4876   Created pod: podinfo-primary-54dd4d4876-fr5nh
5m15s       Normal    Scheduled               pod/podinfo-primary-54dd4d4876-fr5nh    Successfully assigned test/podinfo-primary-54dd4d4876-fr5nh to k3d-k3s-default-agent-0
5m14s       Normal    Pulled                  pod/podinfo-primary-54dd4d4876-fr5nh    Container image "cr.l5d.io/linkerd/proxy-init:v1.5.3" already present on machine
5m14s       Normal    Created                 pod/podinfo-primary-54dd4d4876-fr5nh    Created container linkerd-init
5m14s       Normal    Started                 pod/podinfo-primary-54dd4d4876-fr5nh    Started container linkerd-init
5m13s       Normal    Pulled                  pod/podinfo-primary-54dd4d4876-fr5nh    Container image "cr.l5d.io/linkerd/proxy:stable-2.11.4" already present on machine
5m13s       Normal    Created                 pod/podinfo-primary-54dd4d4876-fr5nh    Created container linkerd-proxy
5m13s       Normal    Started                 pod/podinfo-primary-54dd4d4876-fr5nh    Started container linkerd-proxy
5m13s       Normal    IssuedLeafCertificate   serviceaccount/default                  issued certificate for default.test.serviceaccount.identity.linkerd.cluster.local until 2022-07-22 18:01:09 +0000 UTC: 9a88498c3e7fae9701663c92dececf72
5m12s       Normal    Pulling                 pod/podinfo-primary-54dd4d4876-fr5nh    Pulling image "quay.io/stefanprodan/podinfo:1.7.0"
5m6s        Normal    Pulled                  pod/podinfo-primary-54dd4d4876-fr5nh    Successfully pulled image "quay.io/stefanprodan/podinfo:1.7.0" in 5.9068791s
5m5s        Normal    Created                 pod/podinfo-primary-54dd4d4876-fr5nh    Created container podinfod
5m5s        Normal    Started                 pod/podinfo-primary-54dd4d4876-fr5nh    Started container podinfod
5m5s        Normal    Synced                  canary/podinfo                          all the metrics providers are available!
5m5s        Normal    ScalingReplicaSet       deployment/podinfo                      Scaled down replica set podinfo-7bfd46f477 to 0
5m5s        Normal    SuccessfulDelete        replicaset/podinfo-7bfd46f477           Deleted pod: podinfo-7bfd46f477-fjj8h
5m5s        Normal    Killing                 pod/podinfo-7bfd46f477-fjj8h            Stopping container linkerd-proxy
5m5s        Normal    Synced                  canary/podinfo                          Initialization done! podinfo.test
5m5s        Normal    Created                 trafficsplit/podinfo                    Created Service Profile podinfo.test.svc.cluster.local
5m1s        Normal    Killing                 pod/podinfo-7bfd46f477-fjj8h            Stopping container podinfod
5m1s        Warning   FailedKillPod           pod/podinfo-7bfd46f477-fjj8h            error killing pod: failed to "KillContainer" for "podinfod" with KillContainerError: "rpc error: code = NotFound desc = an error occurred when try to find container \"c41ba6d69df7fac8857a4260e2cd8eb8da3f06ea496e6d3315212df03eeb8cf6\": not found"
75s         Normal    Synced                  canary/podinfo                          New revision detected! Scaling up podinfo.test
75s         Normal    ScalingReplicaSet       deployment/podinfo                      Scaled up replica set podinfo-69c49997fd to 1
75s         Normal    Injected                deployment/podinfo                      Linkerd sidecar proxy injected
75s         Normal    SuccessfulCreate        replicaset/podinfo-69c49997fd           Created pod: podinfo-69c49997fd-tvkt5
75s         Normal    Scheduled               pod/podinfo-69c49997fd-tvkt5            Successfully assigned test/podinfo-69c49997fd-tvkt5 to k3d-k3s-default-agent-1
74s         Normal    Pulled                  pod/podinfo-69c49997fd-tvkt5            Container image "cr.l5d.io/linkerd/proxy-init:v1.5.3" already present on machine
74s         Normal    Created                 pod/podinfo-69c49997fd-tvkt5            Created container linkerd-init
74s         Normal    Started                 pod/podinfo-69c49997fd-tvkt5            Started container linkerd-init
74s         Normal    Pulled                  pod/podinfo-69c49997fd-tvkt5            Container image "cr.l5d.io/linkerd/proxy:stable-2.11.4" already present on machine
74s         Normal    Created                 pod/podinfo-69c49997fd-tvkt5            Created container linkerd-proxy
74s         Normal    Started                 pod/podinfo-69c49997fd-tvkt5            Started container linkerd-proxy
74s         Normal    IssuedLeafCertificate   serviceaccount/default                  issued certificate for default.test.serviceaccount.identity.linkerd.cluster.local until 2022-07-22 18:05:08 +0000 UTC: 395ad74868ef29a9c9abcffe0f942e1f
73s         Normal    Pulling                 pod/podinfo-69c49997fd-tvkt5            Pulling image "quay.io/stefanprodan/podinfo:1.7.1"
66s         Normal    Pulled                  pod/podinfo-69c49997fd-tvkt5            Successfully pulled image "quay.io/stefanprodan/podinfo:1.7.1" in 6.4492468s
66s         Normal    Created                 pod/podinfo-69c49997fd-tvkt5            Created container podinfod
66s         Normal    Started                 pod/podinfo-69c49997fd-tvkt5            Started container podinfod
65s         Normal    Synced                  canary/podinfo                          Starting canary analysis for podinfo.test
65s         Normal    Synced                  canary/podinfo                          Advance podinfo.test canary weight 10
55s         Warning   Synced                  canary/podinfo                          Halt advancement no values found for linkerd metric request-success-rate probably podinfo.test is not receiving traffic: running query failed: no values found
45s         Normal    Synced                  canary/podinfo                          Advance podinfo.test canary weight 20
35s         Normal    Synced                  canary/podinfo                          Advance podinfo.test canary weight 30
25s         Normal    Synced                  canary/podinfo                          Advance podinfo.test canary weight 40
15s         Normal    Synced                  canary/podinfo                          Advance podinfo.test canary weight 50
5s          Normal    Synced                  canary/podinfo                          (combined from similar events): Advance podinfo.test canary weight 60
5s          Normal    Updated                 trafficsplit/podinfo                    Updated Service Profile podinfo.test.svc.cluster.local
0s          Normal    Synced                  canary/podinfo                          (combined from similar events): Advance podinfo.test canary weight 70
0s          Normal    Updated                 trafficsplit/podinfo                    Updated Service Profile podinfo.test.svc.cluster.local
0s          Normal    Synced                  canary/podinfo                          (combined from similar events): Advance podinfo.test canary weight 80
0s          Normal    Updated                 trafficsplit/podinfo                    Updated Service Profile podinfo.test.svc.cluster.local
0s          Normal    Synced                  canary/podinfo                          (combined from similar events): Advance podinfo.test canary weight 90
0s          Normal    Updated                 trafficsplit/podinfo                    Updated Service Profile podinfo.test.svc.cluster.local
0s          Normal    Synced                  canary/podinfo                          (combined from similar events): Advance podinfo.test canary weight 100
0s          Normal    Updated                 trafficsplit/podinfo                    Updated Service Profile podinfo.test.svc.cluster.local
0s          Normal    Synced                  canary/podinfo                          (combined from similar events): Copying podinfo.test template spec to podinfo-primary.test
0s          Normal    ScalingReplicaSet       deployment/podinfo-primary              Scaled up replica set podinfo-primary-56d6467959 to 1
0s          Normal    Injected                deployment/podinfo-primary              Linkerd sidecar proxy injected
0s          Normal    SuccessfulCreate        replicaset/podinfo-primary-56d6467959   Created pod: podinfo-primary-56d6467959-b2hfj
0s          Normal    Scheduled               pod/podinfo-primary-56d6467959-b2hfj    Successfully assigned test/podinfo-primary-56d6467959-b2hfj to k3d-k3s-default-server-0
0s          Normal    Pulled                  pod/podinfo-primary-56d6467959-b2hfj    Container image "cr.l5d.io/linkerd/proxy-init:v1.5.3" already present on machine
0s          Normal    Created                 pod/podinfo-primary-56d6467959-b2hfj    Created container linkerd-init
0s          Normal    Started                 pod/podinfo-primary-56d6467959-b2hfj    Started container linkerd-init
0s          Normal    Pulled                  pod/podinfo-primary-56d6467959-b2hfj    Container image "cr.l5d.io/linkerd/proxy:stable-2.11.4" already present on machine
0s          Normal    Created                 pod/podinfo-primary-56d6467959-b2hfj    Created container linkerd-proxy
0s          Normal    Started                 pod/podinfo-primary-56d6467959-b2hfj    Started container linkerd-proxy
0s          Normal    IssuedLeafCertificate   serviceaccount/default                  issued certificate for default.test.serviceaccount.identity.linkerd.cluster.local until 2022-07-22 18:07:08 +0000 UTC: 07bb81a418cb450ff0ceb3c8c3b7626a
0s          Normal    Pulling                 pod/podinfo-primary-56d6467959-b2hfj    Pulling image "quay.io/stefanprodan/podinfo:1.7.1"
0s          Normal    Pulled                  pod/podinfo-primary-56d6467959-b2hfj    Successfully pulled image "quay.io/stefanprodan/podinfo:1.7.1" in 4.4304092s
0s          Normal    Created                 pod/podinfo-primary-56d6467959-b2hfj    Created container podinfod
0s          Normal    Started                 pod/podinfo-primary-56d6467959-b2hfj    Started container podinfod
0s          Normal    ScalingReplicaSet       deployment/podinfo-primary              Scaled down replica set podinfo-primary-54dd4d4876 to 0
0s          Normal    SuccessfulDelete        replicaset/podinfo-primary-54dd4d4876   Deleted pod: podinfo-primary-54dd4d4876-fr5nh
0s          Normal    Killing                 pod/podinfo-primary-54dd4d4876-fr5nh    Stopping container linkerd-proxy
0s          Normal    Killing                 pod/podinfo-primary-54dd4d4876-fr5nh    Stopping container podinfod
0s          Normal    Synced                  canary/podinfo                          (combined from similar events): Routing all traffic to primary
0s          Normal    Updated                 trafficsplit/podinfo                    Updated Service Profile podinfo.test.svc.cluster.local
0s          Normal    ScalingReplicaSet       deployment/podinfo                      Scaled down replica set podinfo-69c49997fd to 0
0s          Normal    Synced                  canary/podinfo                          (combined from similar events): Promotion completed! Scaling down podinfo.test
0s          Normal    SuccessfulDelete        replicaset/podinfo-69c49997fd           Deleted pod: podinfo-69c49997fd-tvkt5
0s          Normal    Killing                 pod/podinfo-69c49997fd-tvkt5            Stopping container linkerd-proxy
0s          Normal    Killing                 pod/podinfo-69c49997fd-tvkt5            Stopping container podinfod
0s          Warning   Unhealthy               pod/podinfo-69c49997fd-tvkt5            Readiness probe failed: Get "http://10.42.1.22:4191/ready": dial tcp 10.42.1.22:4191: connect: connection refused
0s          Warning   Unhealthy               pod/podinfo-69c49997fd-tvkt5            Liveness probe failed: Get "http://10.42.1.22:4191/live": dial tcp 10.42.1.22:4191: connect: connection refused
0s          Normal    Updated                 trafficsplit/podinfo                    Updated Service Profile podinfo.test.svc.cluster.local
^C(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ kubectl get ev -n test --watch[C[C[C[C[C[C[C[C[C[C-n test set image deployment/podinfo podinfod=quay.io/stefanprodan/podinfo:1.7.1[K0
deployment.apps/podinfo image updated
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ kubectl -n test set image deployment/podinfo podinfod=quay.io/stefanprodan/podinfo:1.7.0[C[C[C[C[C[C[C[C[C[Cget ev -n test --watch[K
LAST SEEN   TYPE      REASON                  OBJECT                                  MESSAGE
19m         Normal    ScalingReplicaSet       deployment/load                         Scaled up replica set load-7f97579865 to 1
19m         Normal    ScalingReplicaSet       deployment/frontend                     Scaled up replica set frontend-6957977dc7 to 1
19m         Normal    Injected                deployment/load                         Linkerd sidecar proxy injected
19m         Normal    Injected                deployment/frontend                     Linkerd sidecar proxy injected
19m         Normal    SuccessfulCreate        replicaset/load-7f97579865              Created pod: load-7f97579865-tbb67
19m         Normal    Scheduled               pod/load-7f97579865-tbb67               Successfully assigned test/load-7f97579865-tbb67 to k3d-k3s-default-agent-0
19m         Normal    SuccessfulCreate        replicaset/frontend-6957977dc7          Created pod: frontend-6957977dc7-t766p
19m         Normal    Scheduled               pod/frontend-6957977dc7-t766p           Successfully assigned test/frontend-6957977dc7-t766p to k3d-k3s-default-server-0
19m         Normal    ScalingReplicaSet       deployment/podinfo                      Scaled up replica set podinfo-7bfd46f477 to 1
19m         Normal    SuccessfulCreate        replicaset/podinfo-7bfd46f477           Created pod: podinfo-7bfd46f477-fjj8h
19m         Normal    Scheduled               pod/podinfo-7bfd46f477-fjj8h            Successfully assigned test/podinfo-7bfd46f477-fjj8h to k3d-k3s-default-agent-1
19m         Normal    Pulled                  pod/load-7f97579865-tbb67               Container image "cr.l5d.io/linkerd/proxy-init:v1.5.3" already present on machine
19m         Normal    Pulled                  pod/frontend-6957977dc7-t766p           Container image "cr.l5d.io/linkerd/proxy-init:v1.5.3" already present on machine
19m         Normal    Created                 pod/load-7f97579865-tbb67               Created container linkerd-init
19m         Normal    Created                 pod/frontend-6957977dc7-t766p           Created container linkerd-init
19m         Normal    Started                 pod/load-7f97579865-tbb67               Started container linkerd-init
19m         Normal    Pulled                  pod/podinfo-7bfd46f477-fjj8h            Container image "cr.l5d.io/linkerd/proxy-init:v1.5.3" already present on machine
19m         Normal    Started                 pod/frontend-6957977dc7-t766p           Started container linkerd-init
19m         Normal    Created                 pod/podinfo-7bfd46f477-fjj8h            Created container linkerd-init
19m         Normal    Started                 pod/podinfo-7bfd46f477-fjj8h            Started container linkerd-init
19m         Normal    Pulled                  pod/frontend-6957977dc7-t766p           Container image "cr.l5d.io/linkerd/proxy:stable-2.11.4" already present on machine
19m         Normal    Pulled                  pod/podinfo-7bfd46f477-fjj8h            Container image "cr.l5d.io/linkerd/proxy:stable-2.11.4" already present on machine
19m         Normal    Created                 pod/frontend-6957977dc7-t766p           Created container linkerd-proxy
19m         Normal    Created                 pod/podinfo-7bfd46f477-fjj8h            Created container linkerd-proxy
19m         Normal    Started                 pod/frontend-6957977dc7-t766p           Started container linkerd-proxy
19m         Normal    Started                 pod/podinfo-7bfd46f477-fjj8h            Started container linkerd-proxy
19m         Normal    IssuedLeafCertificate   serviceaccount/default                  issued certificate for default.test.serviceaccount.identity.linkerd.cluster.local until 2022-07-22 17:57:16 +0000 UTC: 794712d4b7d06256ee2e7a86fae9dbb8
19m         Normal    IssuedLeafCertificate   serviceaccount/default                  issued certificate for default.test.serviceaccount.identity.linkerd.cluster.local until 2022-07-22 17:57:16 +0000 UTC: 3384072f59121facc29b1baf67bfd43e
19m         Normal    Pulled                  pod/load-7f97579865-tbb67               Container image "cr.l5d.io/linkerd/proxy:stable-2.11.4" already present on machine
19m         Normal    Created                 pod/load-7f97579865-tbb67               Created container linkerd-proxy
19m         Normal    Started                 pod/load-7f97579865-tbb67               Started container linkerd-proxy
19m         Normal    IssuedLeafCertificate   serviceaccount/default                  issued certificate for default.test.serviceaccount.identity.linkerd.cluster.local until 2022-07-22 17:57:17 +0000 UTC: 9fc30430222b9455a9131e6a99a26de5
19m         Normal    Pulling                 pod/frontend-6957977dc7-t766p           Pulling image "nginx:alpine"
19m         Normal    Pulling                 pod/podinfo-7bfd46f477-fjj8h            Pulling image "quay.io/stefanprodan/podinfo:1.7.0"
19m         Normal    Pulling                 pod/load-7f97579865-tbb67               Pulling image "buoyantio/slow_cooker:1.2.0"
19m         Normal    Pulled                  pod/podinfo-7bfd46f477-fjj8h            Successfully pulled image "quay.io/stefanprodan/podinfo:1.7.0" in 4.9281988s
19m         Normal    Created                 pod/podinfo-7bfd46f477-fjj8h            Created container podinfod
19m         Normal    Started                 pod/podinfo-7bfd46f477-fjj8h            Started container podinfod
19m         Normal    Pulled                  pod/load-7f97579865-tbb67               Successfully pulled image "buoyantio/slow_cooker:1.2.0" in 6.2414386s
19m         Normal    Created                 pod/load-7f97579865-tbb67               Created container slow-cooker
19m         Normal    Started                 pod/load-7f97579865-tbb67               Started container slow-cooker
19m         Normal    Pulled                  pod/frontend-6957977dc7-t766p           Successfully pulled image "nginx:alpine" in 7.314062s
19m         Normal    Created                 pod/frontend-6957977dc7-t766p           Created container nginx
19m         Normal    Started                 pod/frontend-6957977dc7-t766p           Started container nginx
15m         Warning   Synced                  canary/podinfo                          podinfo-primary.test not ready: waiting for rollout to finish: observed deployment generation less than desired generation
15m         Normal    ScalingReplicaSet       deployment/podinfo-primary              Scaled up replica set podinfo-primary-54dd4d4876 to 1
15m         Normal    SuccessfulCreate        replicaset/podinfo-primary-54dd4d4876   Created pod: podinfo-primary-54dd4d4876-fr5nh
15m         Normal    Scheduled               pod/podinfo-primary-54dd4d4876-fr5nh    Successfully assigned test/podinfo-primary-54dd4d4876-fr5nh to k3d-k3s-default-agent-0
15m         Normal    Pulled                  pod/podinfo-primary-54dd4d4876-fr5nh    Container image "cr.l5d.io/linkerd/proxy-init:v1.5.3" already present on machine
15m         Normal    Created                 pod/podinfo-primary-54dd4d4876-fr5nh    Created container linkerd-init
15m         Normal    Started                 pod/podinfo-primary-54dd4d4876-fr5nh    Started container linkerd-init
15m         Normal    Pulled                  pod/podinfo-primary-54dd4d4876-fr5nh    Container image "cr.l5d.io/linkerd/proxy:stable-2.11.4" already present on machine
15m         Normal    Created                 pod/podinfo-primary-54dd4d4876-fr5nh    Created container linkerd-proxy
15m         Normal    Started                 pod/podinfo-primary-54dd4d4876-fr5nh    Started container linkerd-proxy
15m         Normal    IssuedLeafCertificate   serviceaccount/default                  issued certificate for default.test.serviceaccount.identity.linkerd.cluster.local until 2022-07-22 18:01:09 +0000 UTC: 9a88498c3e7fae9701663c92dececf72
15m         Normal    Pulling                 pod/podinfo-primary-54dd4d4876-fr5nh    Pulling image "quay.io/stefanprodan/podinfo:1.7.0"
15m         Normal    Pulled                  pod/podinfo-primary-54dd4d4876-fr5nh    Successfully pulled image "quay.io/stefanprodan/podinfo:1.7.0" in 5.9068791s
15m         Normal    Created                 pod/podinfo-primary-54dd4d4876-fr5nh    Created container podinfod
15m         Normal    Started                 pod/podinfo-primary-54dd4d4876-fr5nh    Started container podinfod
15m         Normal    Synced                  canary/podinfo                          all the metrics providers are available!
15m         Normal    ScalingReplicaSet       deployment/podinfo                      Scaled down replica set podinfo-7bfd46f477 to 0
15m         Normal    SuccessfulDelete        replicaset/podinfo-7bfd46f477           Deleted pod: podinfo-7bfd46f477-fjj8h
15m         Normal    Killing                 pod/podinfo-7bfd46f477-fjj8h            Stopping container linkerd-proxy
15m         Normal    Synced                  canary/podinfo                          Initialization done! podinfo.test
15m         Normal    Created                 trafficsplit/podinfo                    Created Service Profile podinfo.test.svc.cluster.local
15m         Normal    Killing                 pod/podinfo-7bfd46f477-fjj8h            Stopping container podinfod
15m         Warning   FailedKillPod           pod/podinfo-7bfd46f477-fjj8h            error killing pod: failed to "KillContainer" for "podinfod" with KillContainerError: "rpc error: code = NotFound desc = an error occurred when try to find container \"c41ba6d69df7fac8857a4260e2cd8eb8da3f06ea496e6d3315212df03eeb8cf6\": not found"
11m         Normal    Synced                  canary/podinfo                          New revision detected! Scaling up podinfo.test
11m         Normal    ScalingReplicaSet       deployment/podinfo                      Scaled up replica set podinfo-69c49997fd to 1
11m         Normal    Injected                deployment/podinfo                      Linkerd sidecar proxy injected
11m         Normal    SuccessfulCreate        replicaset/podinfo-69c49997fd           Created pod: podinfo-69c49997fd-tvkt5
11m         Normal    Scheduled               pod/podinfo-69c49997fd-tvkt5            Successfully assigned test/podinfo-69c49997fd-tvkt5 to k3d-k3s-default-agent-1
11m         Normal    Pulled                  pod/podinfo-69c49997fd-tvkt5            Container image "cr.l5d.io/linkerd/proxy-init:v1.5.3" already present on machine
11m         Normal    Created                 pod/podinfo-69c49997fd-tvkt5            Created container linkerd-init
11m         Normal    Started                 pod/podinfo-69c49997fd-tvkt5            Started container linkerd-init
11m         Normal    Pulled                  pod/podinfo-69c49997fd-tvkt5            Container image "cr.l5d.io/linkerd/proxy:stable-2.11.4" already present on machine
11m         Normal    Created                 pod/podinfo-69c49997fd-tvkt5            Created container linkerd-proxy
11m         Normal    Started                 pod/podinfo-69c49997fd-tvkt5            Started container linkerd-proxy
11m         Normal    IssuedLeafCertificate   serviceaccount/default                  issued certificate for default.test.serviceaccount.identity.linkerd.cluster.local until 2022-07-22 18:05:08 +0000 UTC: 395ad74868ef29a9c9abcffe0f942e1f
11m         Normal    Pulling                 pod/podinfo-69c49997fd-tvkt5            Pulling image "quay.io/stefanprodan/podinfo:1.7.1"
11m         Normal    Pulled                  pod/podinfo-69c49997fd-tvkt5            Successfully pulled image "quay.io/stefanprodan/podinfo:1.7.1" in 6.4492468s
11m         Normal    Created                 pod/podinfo-69c49997fd-tvkt5            Created container podinfod
11m         Normal    Started                 pod/podinfo-69c49997fd-tvkt5            Started container podinfod
11m         Normal    Synced                  canary/podinfo                          Starting canary analysis for podinfo.test
11m         Normal    Synced                  canary/podinfo                          Advance podinfo.test canary weight 10
10m         Warning   Synced                  canary/podinfo                          Halt advancement no values found for linkerd metric request-success-rate probably podinfo.test is not receiving traffic: running query failed: no values found
10m         Normal    Synced                  canary/podinfo                          Advance podinfo.test canary weight 20
10m         Normal    Synced                  canary/podinfo                          Advance podinfo.test canary weight 30
10m         Normal    Synced                  canary/podinfo                          Advance podinfo.test canary weight 40
10m         Normal    Synced                  canary/podinfo                          Advance podinfo.test canary weight 50
9m19s       Normal    ScalingReplicaSet       deployment/podinfo-primary              Scaled up replica set podinfo-primary-56d6467959 to 1
9m19s       Normal    Injected                deployment/podinfo-primary              Linkerd sidecar proxy injected
9m19s       Normal    SuccessfulCreate        replicaset/podinfo-primary-56d6467959   Created pod: podinfo-primary-56d6467959-b2hfj
9m18s       Normal    Scheduled               pod/podinfo-primary-56d6467959-b2hfj    Successfully assigned test/podinfo-primary-56d6467959-b2hfj to k3d-k3s-default-server-0
9m18s       Normal    Pulled                  pod/podinfo-primary-56d6467959-b2hfj    Container image "cr.l5d.io/linkerd/proxy-init:v1.5.3" already present on machine
9m18s       Normal    Created                 pod/podinfo-primary-56d6467959-b2hfj    Created container linkerd-init
9m18s       Normal    Started                 pod/podinfo-primary-56d6467959-b2hfj    Started container linkerd-init
9m18s       Normal    Pulled                  pod/podinfo-primary-56d6467959-b2hfj    Container image "cr.l5d.io/linkerd/proxy:stable-2.11.4" already present on machine
9m18s       Normal    Created                 pod/podinfo-primary-56d6467959-b2hfj    Created container linkerd-proxy
9m18s       Normal    Started                 pod/podinfo-primary-56d6467959-b2hfj    Started container linkerd-proxy
9m18s       Normal    IssuedLeafCertificate   serviceaccount/default                  issued certificate for default.test.serviceaccount.identity.linkerd.cluster.local until 2022-07-22 18:07:08 +0000 UTC: 07bb81a418cb450ff0ceb3c8c3b7626a
9m17s       Normal    Pulling                 pod/podinfo-primary-56d6467959-b2hfj    Pulling image "quay.io/stefanprodan/podinfo:1.7.1"
9m12s       Normal    Pulled                  pod/podinfo-primary-56d6467959-b2hfj    Successfully pulled image "quay.io/stefanprodan/podinfo:1.7.1" in 4.4304092s
9m11s       Normal    Created                 pod/podinfo-primary-56d6467959-b2hfj    Created container podinfod
9m11s       Normal    Started                 pod/podinfo-primary-56d6467959-b2hfj    Started container podinfod
9m11s       Normal    ScalingReplicaSet       deployment/podinfo-primary              Scaled down replica set podinfo-primary-54dd4d4876 to 0
9m11s       Normal    SuccessfulDelete        replicaset/podinfo-primary-54dd4d4876   Deleted pod: podinfo-primary-54dd4d4876-fr5nh
9m11s       Normal    Killing                 pod/podinfo-primary-54dd4d4876-fr5nh    Stopping container linkerd-proxy
9m11s       Normal    Killing                 pod/podinfo-primary-54dd4d4876-fr5nh    Stopping container podinfod
8m59s       Normal    ScalingReplicaSet       deployment/podinfo                      Scaled down replica set podinfo-69c49997fd to 0
8m59s       Normal    Synced                  canary/podinfo                          (combined from similar events): Promotion completed! Scaling down podinfo.test
8m59s       Normal    SuccessfulDelete        replicaset/podinfo-69c49997fd           Deleted pod: podinfo-69c49997fd-tvkt5
8m59s       Normal    Killing                 pod/podinfo-69c49997fd-tvkt5            Stopping container linkerd-proxy
8m59s       Normal    Killing                 pod/podinfo-69c49997fd-tvkt5            Stopping container podinfod
8m59s       Warning   Unhealthy               pod/podinfo-69c49997fd-tvkt5            Readiness probe failed: Get "http://10.42.1.22:4191/ready": dial tcp 10.42.1.22:4191: connect: connection refused
8m59s       Warning   Unhealthy               pod/podinfo-69c49997fd-tvkt5            Liveness probe failed: Get "http://10.42.1.22:4191/live": dial tcp 10.42.1.22:4191: connect: connection refused
6m24s       Normal    Updated                 trafficsplit/podinfo                    Updated Service Profile podinfo.test.svc.cluster.local
0s          Normal    Synced                  canary/podinfo                          New revision detected! Scaling up podinfo.test
0s          Normal    ScalingReplicaSet       deployment/podinfo                      Scaled up replica set podinfo-7bfd46f477 to 1
0s          Normal    Injected                deployment/podinfo                      Linkerd sidecar proxy injected
0s          Normal    SuccessfulCreate        replicaset/podinfo-7bfd46f477           Created pod: podinfo-7bfd46f477-f87s2
0s          Normal    Scheduled               pod/podinfo-7bfd46f477-f87s2            Successfully assigned test/podinfo-7bfd46f477-f87s2 to k3d-k3s-default-agent-1
0s          Normal    Pulled                  pod/podinfo-7bfd46f477-f87s2            Container image "cr.l5d.io/linkerd/proxy-init:v1.5.3" already present on machine
0s          Normal    Created                 pod/podinfo-7bfd46f477-f87s2            Created container linkerd-init
0s          Normal    Started                 pod/podinfo-7bfd46f477-f87s2            Started container linkerd-init
0s          Normal    Pulled                  pod/podinfo-7bfd46f477-f87s2            Container image "cr.l5d.io/linkerd/proxy:stable-2.11.4" already present on machine
0s          Normal    Created                 pod/podinfo-7bfd46f477-f87s2            Created container linkerd-proxy
0s          Normal    Started                 pod/podinfo-7bfd46f477-f87s2            Started container linkerd-proxy
0s          Normal    IssuedLeafCertificate   serviceaccount/default                  issued certificate for default.test.serviceaccount.identity.linkerd.cluster.local until 2022-07-22 18:16:29 +0000 UTC: 199725ef41341604e67ade5f01754515
0s          Normal    Pulled                  pod/podinfo-7bfd46f477-f87s2            Container image "quay.io/stefanprodan/podinfo:1.7.0" already present on machine
0s          Normal    Created                 pod/podinfo-7bfd46f477-f87s2            Created container podinfod
0s          Normal    Started                 pod/podinfo-7bfd46f477-f87s2            Started container podinfod
0s          Normal    Synced                  canary/podinfo                          (combined from similar events): Starting canary analysis for podinfo.test
0s          Normal    Synced                  canary/podinfo                          Advance podinfo.test canary weight 10
0s          Normal    Updated                 trafficsplit/podinfo                    Updated Service Profile podinfo.test.svc.cluster.local
0s          Normal    Synced                  canary/podinfo                          Advance podinfo.test canary weight 20
0s          Normal    Updated                 trafficsplit/podinfo                    Updated Service Profile podinfo.test.svc.cluster.local
0s          Normal    Synced                  canary/podinfo                          Advance podinfo.test canary weight 30
0s          Normal    Updated                 trafficsplit/podinfo                    Updated Service Profile podinfo.test.svc.cluster.local
0s          Normal    Synced                  canary/podinfo                          (combined from similar events): Advance podinfo.test canary weight 40
0s          Normal    Updated                 trafficsplit/podinfo                    Updated Service Profile podinfo.test.svc.cluster.local
0s          Normal    Synced                  canary/podinfo                          (combined from similar events): Advance podinfo.test canary weight 50
0s          Normal    Updated                 trafficsplit/podinfo                    Updated Service Profile podinfo.test.svc.cluster.local
0s          Normal    Synced                  canary/podinfo                          (combined from similar events): Advance podinfo.test canary weight 60
0s          Normal    Updated                 trafficsplit/podinfo                    Updated Service Profile podinfo.test.svc.cluster.local
0s          Normal    Updated                 trafficsplit/podinfo                    Updated Service Profile podinfo.test.svc.cluster.local
^C(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ kubecltt [K[K[K[Ktl get canary -n test
NAME      STATUS        WEIGHT   LASTTRANSITIONTIME
podinfo   Progressing   80       2022-07-21T18:17:27Z
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ kubectl get canary -n test --wach[K[Ktch
NAME      STATUS        WEIGHT   LASTTRANSITIONTIME
podinfo   Progressing   90       2022-07-21T18:17:37Z
podinfo   Progressing   100      2022-07-21T18:17:47Z
podinfo   Promoting     0        2022-07-21T18:17:57Z
^C(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ kubectl -n test get trafficsplit podinfo -o yaml
apiVersion: split.smi-spec.io/v1alpha2
kind: TrafficSplit
metadata:
  creationTimestamp: "2022-07-21T18:00:57Z"
  generation: 22
  name: podinfo
  namespace: test
  ownerReferences:
  - apiVersion: flagger.app/v1beta1
    blockOwnerDeletion: true
    controller: true
    kind: Canary
    name: podinfo
    uid: 63c80812-e303-44f9-99ee-c374c922dafd
  resourceVersion: "11876"
  uid: 8f6c7cac-0bae-41b3-b1d0-f3d54b6c2e7b
spec:
  backends:
  - service: podinfo-canary
    weight: "100"
  - service: podinfo-primary
    weight: "0"
  service: podinfo
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ kubectl -n test get trafficsplit podinfo -o yaml --watch
apiVersion: split.smi-spec.io/v1alpha2
kind: TrafficSplit
metadata:
  creationTimestamp: "2022-07-21T18:00:57Z"
  generation: 23
  name: podinfo
  namespace: test
  ownerReferences:
  - apiVersion: flagger.app/v1beta1
    blockOwnerDeletion: true
    controller: true
    kind: Canary
    name: podinfo
    uid: 63c80812-e303-44f9-99ee-c374c922dafd
  resourceVersion: "11948"
  uid: 8f6c7cac-0bae-41b3-b1d0-f3d54b6c2e7b
spec:
  backends:
  - service: podinfo-canary
    weight: "0"
  - service: podinfo-primary
    weight: "100"
  service: podinfo
^C(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ i[Klinkerd viz -n test star [K[Kt deploy --from dpe[K[Keploy/load --watch
Error: unknown flag: --watch
Usage:
  linkerd viz stat [flags] (RESOURCES)

Examples:
  # Get all deployments in the test namespace.
  linkerd viz stat deployments -n test

  # Get the hello1 replication controller in the test namespace.
  linkerd viz stat replicationcontrollers hello1 -n test

  # Get all namespaces.
  linkerd viz stat namespaces

  # Get all inbound stats to the web deployment.
  linkerd viz stat deploy/web

  # Get all inbound stats to the pod1 and pod2 pods
  linkerd viz stat po pod1 pod2

  # Get all inbound stats to the pod1 pod and the web deployment
  linkerd viz stat po/pod1 deploy/web

  # Get all pods in all namespaces that call the hello1 deployment in the test namespace.
  linkerd viz stat pods --to deploy/hello1 --to-namespace test --all-namespaces

  # Get all pods in all namespaces that call the hello1 service in the test namespace.
  linkerd viz stat pods --to svc/hello1 --to-namespace test --all-namespaces

  # Get the web service. With Services, metrics are generated from the outbound metrics
  # of clients, and thus will not include unmeshed client request metrics.
  linkerd viz stat svc/web

  # Get the web services and metrics for any traffic coming to the service from the hello1 deployment
  # in the test namespace.
  linkerd viz stat svc/web --from deploy/hello1 --from-namespace test

  # Get the web services and metrics for all the traffic that reaches the web-pod1 pod
  # in the test namespace exclusively.
  linkerd viz stat svc/web --to pod/web-pod1 --to-namespace test

  # Get all services in all namespaces that receive calls from hello1 deployment in the test namespace.
  linkerd viz stat services --from deploy/hello1 --from-namespace test --all-namespaces

  # Get all trafficsplits and their leaf services.
  linkerd viz stat ts

  # Get the hello-split trafficsplit and its leaf services.
  linkerd viz stat ts/hello-split

  # Get all trafficsplits and their leaf services, and metrics for any traffic coming to the leaf services from the hello1 deployment.
  linkerd viz stat ts --from deploy/hello1

  # Get all namespaces that receive traffic from the default namespace.
  linkerd viz stat namespaces --from ns/default

  # Get all inbound stats to the test namespace.
  linkerd viz stat ns/test

  # Get all inbound stats to the emoji-grpc server
  linkerd viz stat server/emoji-grpc

  # Get all inbound stats to the web-public server authorization resource
  linkerd viz stat serverauthorization/web-public
  

Flags:
  -A, --all-namespaces          If present, returns stats across all namespaces, ignoring the "--namespace" flag
      --from string             If present, restricts outbound stats from the specified resource name
      --from-namespace string   Sets the namespace used from lookup the "--from" resource; by default the current "--namespace" is used
  -h, --help                    help for stat
  -n, --namespace string        Namespace of the specified resource
  -o, --output string           Output format; one of: "table" or "json" or "wide" (default "table")
  -l, --selector string         Selector (label query) to filter on, supports '=', '==', and '!='
  -t, --time-window string      Stat window (for example: "15s", "1m", "10m", "1h"). Needs to be at least 15s. (default "1m")
      --to string               If present, restricts outbound stats to the specified resource name
      --to-namespace string     Sets the namespace used to lookup the "--to" resource; by default the current "--namespace" is used
      --unmeshed                If present, include unmeshed resources in the output

Global Flags:
      --api-addr string            Override kubeconfig and communicate directly with the control plane at host:port (mostly for testing)
      --as string                  Username to impersonate for Kubernetes operations
      --as-group stringArray       Group to impersonate for Kubernetes operations
      --cni-namespace string       Namespace in which the Linkerd CNI plugin is installed (default "linkerd-cni")
      --context string             Name of the kubeconfig context to use
      --kubeconfig string          Path to the kubeconfig file to use for CLI requests
  -L, --linkerd-namespace string   Namespace in which Linkerd is installed (default "linkerd")
      --verbose                    Turn on debug logging

(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ linkerd viz -n test stat deploy --from deploy/load --watch[K[K
NAME              MESHED   SUCCESS       RPS   LATENCY_P50   LATENCY_P95   LATENCY_P99   TCP_CONN
podinfo              0/0         -         -             -             -             -          -
podinfo-primary      1/1   100.00%   10.0rps           1ms           1ms           1ms          1
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ linkerd viz -n test stat deploy --from deploy/load
NAME              MESHED   SUCCESS       RPS   LATENCY_P50   LATENCY_P95   LATENCY_P99   TCP_CONN
podinfo              0/0         -         -             -             -             -          -
podinfo-primary      1/1   100.00%   10.0rps           1ms           1ms           1ms          1
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ curl http://localhost:8080 | jq
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0curl: (7) Failed to connect to localhost port 8080: Connection refused
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ curl http://localhost:8080 | jq[1P[1P[1P[1P[13@http://localh[7@ost:507[2@50[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100   804  100   804    0     0  89333      0 --:--:-- --:--:-- --:--:-- 80400100   804  100   804    0     0  89333      0 --:--:-- --:--:-- --:--:-- 80400
parse error: Invalid numeric literal at line 2, column 10
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ curl http://localhost:50750 | jq[K[K[K[K[K

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Linkerd</title>
    <meta name="description" content="Linkerd">
    <meta name="keywords" content="Linkerd">
    <link rel="icon" type="image/png" href="/dist/img/favicon.png">
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,900" rel="stylesheet">
    
  
    <script type="text/javascript" src="/dist/index_bundle.js" async></script>
  

  </head>
  <body>
    
  <div class="main" id="main"
    data-release-version="stable-2.11.4"
    data-controller-namespace="linkerd"
    data-uuid="03a681af-d212-4fc1-9cdd-5fe6c413f303"
    data-grafana="grafana.linkerd-viz.svc.cluster.local:3000"
    data-jaeger="">
    
  </div>

  </body>
</html>
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ curl localhost:8081
404 page not found
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ kubectl -n test port-forward svc/frontend 8080 &
[1] 6572
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ Forwarding from 127.0.0.1:8080 -> 8080
Forwarding from [::1]:8080 -> 8080
Handling connection for 8080
Handling connection for 8080
Handling connection for 8080

(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ kubectl -n test port-forward svc/frontend 8080 &[C[C[29Pcurl localhost:8081[C[C[C[C[C[C[Chttp://localhost:50750 | jq[1P808[C[C[C[C[C[C
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0Handling connection for 8080
100   304  100   304    0     0  33777      0 --:--:-- --:--:-- --:--:-- 33777100   304  100   304    0     0  33777      0 --:--:-- --:--:-- --:--:-- 30400
[1;39m{
  [0m[34;1m"hostname"[0m[1;39m: [0m[0;32m"podinfo-primary-6bd6c5c856-pcwng"[0m[1;39m,
  [0m[34;1m"version"[0m[1;39m: [0m[0;32m"1.7.0"[0m[1;39m,
  [0m[34;1m"revision"[0m[1;39m: [0m[0;32m"4fc593f42c7cd2e7319c83f6bfd3743c05523883"[0m[1;39m,
  [0m[34;1m"color"[0m[1;39m: [0m[0;32m"blue"[0m[1;39m,
  [0m[34;1m"message"[0m[1;39m: [0m[0;32m"greetings from podinfo v1.7.0"[0m[1;39m,
  [0m[34;1m"goos"[0m[1;39m: [0m[0;32m"linux"[0m[1;39m,
  [0m[34;1m"goarch"[0m[1;39m: [0m[0;32m"amd64"[0m[1;39m,
  [0m[34;1m"runtime"[0m[1;39m: [0m[0;32m"go1.11.2"[0m[1;39m,
  [0m[34;1m"num_goroutine"[0m[1;39m: [0m[0;32m"7"[0m[1;39m,
  [0m[34;1m"num_cpu"[0m[1;39m: [0m[0;32m"8"[0m[1;39m
[1;39m}[0m
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ fg
kubectl -n test port-forward svc/frontend 8080
^C(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ kubectl delete -k github.com/fluxcd/flagger/kustomize/linkerd
customresourcedefinition.apiextensions.k8s.io "alertproviders.flagger.app" deleted
customresourcedefinition.apiextensions.k8s.io "canaries.flagger.app" deleted
customresourcedefinition.apiextensions.k8s.io "metrictemplates.flagger.app" deleted
serviceaccount "flagger" deleted
clusterrole.rbac.authorization.k8s.io "flagger" deleted
clusterrolebinding.rbac.authorization.k8s.io "flagger" deleted
deployment.apps "flagger" deleted
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ kubectl delete ns test
namespace "test" deleted
(main) [0;32mville@laptop [01;34m~/git/devops-with-kubernetes/part5/e03[0m
$ exit

Script done on 2022-07-21 21:24:48+03:00 [COMMAND_EXIT_CODE="0"]
